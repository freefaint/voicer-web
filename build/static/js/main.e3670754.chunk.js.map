{"version":3,"sources":["contexts/speech.context.tsx","hooks/useSpeech.ts","hooks/useCommand.ts","hooks/useTimeout.ts","contexts/cart.context.tsx","contexts/shop.context.tsx","components/product/item.tsx","components/product/list.tsx","components/cart/item.tsx","components/cart/list.tsx","components/product/card.tsx","components/shop.tsx","App.tsx","hooks/useDB.ts","index.tsx"],"names":["SpeechContext","createContext","undefined","SpeechProvider","children","useState","result","setResult","useEffect","voice","webkitSpeechRecognition","lang","continious","interimResults","onerror","err","onresult","e","results","Object","keys","filter","i","parseInt","toString","map","transcript","final","isFinal","onend","setTimeout","start","Provider","value","useSpeech","useContext","useCommand","command","fn","speech","phraze","find","toLowerCase","indexOf","console","log","reducer","state","action","seconds","type","number","running","CartContext","CartProvider","products","setProducts","add","useCallback","id","count","items","del","item","clear","context","ShopContext","ShopProvider","demoTimer","initSeconds","useReducer","dispatch","reset","resetSeconds","intervalId","setInterval","clearInterval","useTimeout","currentId","setCurrentId","setCount","cart","close","selectRandom","Math","ceil","random","length","variants","name","k","ok","replace","trim","names","j","sort","a","b","first","max","second","target","resetDemoTimer","useStyles","makeStyles","media","height","ProductItem","product","classes","style","margin","Card","CardActionArea","CardMedia","className","image","img","title","CardContent","Typography","gutterBottom","variant","component","display","justifyContent","color","cost","weight","ProductList","onCommand","container","useRef","current","scrollTop","clientHeight","flexDirection","ref","overflow","scrollBehavior","Grid","spacing","xs","theme","createStyles","root","small","width","large","CartItem","Avatar","alt","src","align","CartList","minWidth","marginRight","opacity","transition","alignItems","marginBottom","marginTop","reduce","ProductCard","onBuy","rest","handleBuy","Fab","aria-label","onClick","description","useDialogStyles","dialog","position","paddingRight","boxSizing","Shop","shop","useMemo","Paper","props","Dialog","fullWidth","paper","maxWidth","open","onClose","PaperComponent","aria-labelledby","padding","backgroundColor","App","db","data","source","setDb","useDB","fetch","then","resp","json","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e3670754.chunk.js","sourcesContent":["import { createContext, PropsWithChildren, useEffect, useState } from \"react\";\n\nimport { Speech } from \"../types/speech\";\n\nexport const SpeechContext = createContext<Speech | undefined>(undefined);\n\nexport const SpeechProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [ result, setResult ] = useState<Speech>();\n\n  useEffect(() => {\n    // @ts-ignore\n    const voice = new webkitSpeechRecognition();\n\n    voice.lang = 'ru-RU';\n    voice.continious = true;\n    voice.interimResults = true;\n\n    voice.onerror = (err: any) => {\n      // console.log('error', err);\n    }\n\n    voice.onresult = (e: any) => {\n      const results = Object.keys(e.results[0]).filter(i => parseInt(i, 10).toString() === i).map(i => e.results[0][i].transcript);\n      \n      setResult({ results, final: e.results[0].isFinal });\n    }\n\n    voice.onend = () => {\n      // console.log('end');\n\n      setTimeout(() => voice.start(), 100);\n    }\n\n    voice.start();\n  }, []);\n\n  return (\n    <SpeechContext.Provider value={result}>\n      {children}\n    </SpeechContext.Provider>\n  );\n}","import { useContext } from \"react\";\n\nimport { SpeechContext } from '../contexts/speech.context';\n\nexport const useSpeech = () => {\n  const result = useContext(SpeechContext)\n\n  return result;\n}","import { useEffect } from \"react\";\n\nimport { useSpeech } from \"./useSpeech\";\n\nexport const useCommand = (command: string, fn: (command?: string) => void) => {\n  const speech = useSpeech();\n\n  useEffect(() => {\n    const phraze = speech?.results.find(i => i.toLowerCase().indexOf(command.toLowerCase()) !== -1);\n\n    if (speech?.final && phraze) {\n      console.log('COMMAND', command);\n      fn(phraze);\n    }\n  }, [ command, speech ]);\n}","import { useCallback, useEffect, useReducer } from 'react';\n\nfunction reducer(state: { seconds: number; running: boolean }, action: { type: 'RESET' | 'MINUS'; number?: number }) {\n  const seconds = action.type === 'RESET' ? action.number || 0 : state.seconds - 1;\n  const running = seconds > 0;\n\n  return { seconds, running };\n}\n\nexport const useTimeout = (initSeconds?: number) => {\n  const [state, dispatch] = useReducer(reducer, { seconds: initSeconds ?? 0, running: !!initSeconds });\n\n  const reset = useCallback(\n    (resetSeconds?: number) => {\n      dispatch({ type: 'RESET', number: resetSeconds ?? initSeconds ?? 0 });\n    },\n    [initSeconds],\n  );\n\n  useEffect(() => {\n    let intervalId: NodeJS.Timeout | null = null;\n\n    if (state.running) {\n      intervalId = setInterval(() => {\n        dispatch({ type: 'MINUS' });\n      }, 1000);\n    } else if (intervalId) {\n      clearInterval(intervalId);\n    }\n\n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    };\n  }, [state.running]);\n\n  return { ...state, reset };\n};\n","import { createContext, PropsWithChildren, useCallback, useEffect, useState } from \"react\";\nimport { Cart, Position } from \"../types/cart\";\n\nexport const CartContext = createContext<Cart | undefined>(undefined);\n\nexport const CartProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [ products, setProducts ] = useState<Position[]>([]);\n\n  const add = useCallback((id: string, count?: number) => {\n    setProducts(items => {\n      return !items.find(i => i.id === id)\n        ? [ ...items, { id, count: count ?? 1 } ]\n        : items.map(i => i.id === id ? { id, count: i.count + (count ?? 1) } : i);\n    });\n  }, [ setProducts ]);\n\n  const del = useCallback((id: string, count?: number) => {\n    setProducts(items => {\n      const item = items.find(i => i.id === id);\n\n      if (!item) {\n        return items;\n      }\n\n      const result = item.count === 1 || item.count === count ? items.filter(i => i.id !== id) : items.map(i => i.id === id ? { id, count: i.count - (count ?? i.count) } : i);\n\n      return result.filter(i => i.count);\n    })\n  }, [ setProducts ]);\n\n  const clear = useCallback(() => {\n    setProducts([]);\n  }, [ setProducts ]);\n\n  console.log(products);\n\n  const context = {\n    products,\n    add,\n    del,\n    clear\n  }\n\n  return (\n    <CartContext.Provider value={context}>\n      {children}\n    </CartContext.Provider>\n  );\n}","import { createContext, PropsWithChildren, useCallback, useContext, useEffect, useState } from \"react\";\n\nimport { useCommand } from \"../hooks/useCommand\";\nimport { useSpeech } from \"../hooks/useSpeech\";\nimport { useTimeout } from \"../hooks/useTimeout\";\n\nimport { Product } from \"../types/product\";\nimport { Shop } from \"../types/shop\";\n\nimport { CartContext } from \"./cart.context\";\n\nexport const ShopContext = createContext<Shop | undefined>(undefined);\n\nexport const ShopProvider = ({ children, products }: PropsWithChildren<{ products: Product[] }>) => {\n  const demoTimer = useTimeout(180);\n\n  const [ currentId, setCurrentId ] = useState<string>();\n  const [ count, setCount ] = useState(1);\n\n  const speech = useSpeech();\n  const cart = useContext(CartContext);\n\n  const close = useCallback(() => {\n    setCurrentId(undefined);\n  }, [ setCurrentId ]);\n\n  const selectRandom = useCallback(() => {\n    setCurrentId(products[Math.ceil(Math.random() * products.length) - 1].id);\n  }, [ setCurrentId, products ]);\n\n  const add = useCallback((id: string) => cart?.add(id), [ cart ]);\n\n  useEffect(() => {\n    if (!demoTimer.seconds) {\n      cart?.clear();\n      selectRandom();\n      demoTimer.reset();\n    }\n  }, [ demoTimer.seconds ]);\n\n  useEffect(() => {\n    const variants = products\n      .map(i => ({\n        ...i,\n        results: [\n          { name: i.name, results: speech?.results.map(k => ({ speech: k, ok: k.toLowerCase().indexOf(i.name.replace(/[()\"«»]/, '').toLowerCase().trim()) !== -1 }) ) },\n          ...i.names.map(j => ({ name: j, results: speech?.results.map(k => ({ speech: k, ok: k.toLowerCase().indexOf(j.toLowerCase().trim()) !== -1 }) ) }) )\n        ]\n      }) )\n      .filter(i => i.results?.find(j => j.results?.find(k => k.ok)))\n      .sort((a, b) => {\n        const first = Math.max(...a.results.filter(i => i.results?.find(j => j.ok)).map(i => i.name.length));\n        const second = Math.max(...b.results.filter(i => i.results?.find(j => j.ok)).map(i => i.name.length));\n  \n        return first > second ? -1 : first < second ? 1 : 0;\n      });\n\n    console.log('VARIANTS', variants);\n\n    const target = variants[0];\n\n    if (target && currentId !== target.id) {\n      setCurrentId(target.id);\n    }\n  }, [ speech, products, currentId ]);\n\n  useEffect(() => {\n    setCount(1);\n  }, [ currentId ]);\n\n  useCommand('закрыть', () => {\n    demoTimer.reset();\n    close()\n  });\n\n  useCommand('добавить', command => {\n    if (currentId) {\n      demoTimer.reset();\n      cart?.add(currentId, 1);\n    }\n  });\n\n  useCommand('удалить', command => {\n    if (currentId) {\n      demoTimer.reset();\n      cart?.del(currentId);\n    }\n  });\n\n  useCommand('очистить корзину', command => {\n    demoTimer.reset();\n    cart?.clear();\n  });\n\n  const context = {\n    products,\n    currentId,\n    count,\n    close,\n    resetDemoTimer: demoTimer.reset,\n    add,\n  }\n\n  return (\n    <ShopContext.Provider value={context}>\n      {children}\n    </ShopContext.Provider>\n  );\n}","import { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Product } from \"../../types/product\";\n\nconst useStyles = makeStyles({\n  media: {\n    height: 160,\n  },\n});\n\nexport const ProductItem = ({ product }: { product: Product }) => {\n  const classes = useStyles();\n\n  return (\n    <div style={{ margin: \"0 2rem 2rem 0\" }}>\n      <Card>\n        <CardActionArea>\n          <CardMedia\n            className={classes.media}\n            image={product.img}\n            title={product.name}\n          />\n          <CardContent>\n            <Typography gutterBottom variant=\"body2\" component=\"h2\">\n              {product.name}\n            </Typography>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n              <Typography variant=\"body2\" color=\"error\" component=\"p\">\n                {product.cost}\n              </Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                {product.weight}\n              </Typography>\n            </div>\n          </CardContent>\n        </CardActionArea>\n      </Card>\n    </div>\n  );\n}","import { Grid, Typography } from \"@material-ui/core\";\nimport { useEffect, useRef } from \"react\";\nimport { useCommand } from \"../../hooks/useCommand\";\n\nimport { Product } from \"../../types/product\";\n\nimport { ProductItem } from \"./item\";\n\nexport const ProductList = ({ products, style, onCommand }: { products: Product[], onCommand: () => void } & React.HTMLProps<HTMLDivElement>) => {\n  const container = useRef<HTMLDivElement | null>(null);\n\n  useCommand('вниз', () => {\n    if (!container.current) {\n      return;\n    }\n\n    onCommand();\n    container.current.scrollTop = container.current.clientHeight + container.current.scrollTop;\n  });\n\n  useCommand('вверх', () => {\n    if (!container.current) {\n      return;\n    }\n    \n    onCommand();\n    container.current.scrollTop = container.current.scrollTop - container.current.clientHeight;\n  });\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\", ...style }}>\n      <Typography gutterBottom variant=\"h2\" component=\"h2\">\n        Наше меню\n      </Typography>\n\n      <div ref={container} style={{ display: \"flex\", overflow: \"auto\", scrollBehavior: \"smooth\" }}>\n        <Grid container spacing={0} style={{ margin: \"none\" }}>\n          {products.map(product => (\n            <Grid xs={3}>\n              <ProductItem product={product} />\n            </Grid>\n          ))}\n        </Grid>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { Product } from '../../types/product';\nimport { Grid, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n    },\n    small: {\n      width: theme.spacing(3),\n      height: theme.spacing(3),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n  }),\n);\n\nexport const CartItem = ({ product, count }: { product: Product, count: number }) => {\n  const classes = useStyles();\n\n  return (\n    <>\n      <Grid spacing={1} xs={1}>\n        <Avatar style={{ margin: \"8px 0 8px 0\"}} alt=\"Remy Sharp\" src={product.img} className={classes.small} />\n      </Grid>\n      <Grid xs={6}>\n        <Typography variant=\"body2\" component=\"p\">\n          {product.name}\n        </Typography>\n      </Grid>\n      <Grid xs={2}>\n        <Typography align=\"right\" variant=\"body2\" component=\"p\">\n          x{count}\n        </Typography>\n      </Grid>\n      <Grid xs={3}>\n        <Typography align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n          {product.cost}\n        </Typography>\n      </Grid>\n    </>\n  );\n}\n","import { Grid, Hidden, Typography } from \"@material-ui/core\";\n\nimport { Cart } from \"../../types/cart\";\nimport { Product } from \"../../types/product\";\n\nimport { CartItem } from \"./item\";\n\nexport const CartList = ({ products }: { products: { product: Product, count: number }[] }) => {\n  return (\n    <div style={{ width: !products.length ? 0 : \"400px\", minWidth: !products.length ? 0 : \"400px\", marginRight: !products.length ? \"0\" : \"2rem\", opacity: !products.length ? 0 : 1, transition: \"all 200ms ease-out\", display: \"flex\", flexDirection: \"column\" }}>\n      <Typography gutterBottom variant=\"h2\" component=\"h2\">\n        Корзина\n      </Typography>\n\n      <div style={{ display: \"flex\", overflow: \"auto\" }}>\n        <Grid alignItems=\"center\" container>\n          <Grid spacing={1} xs={1} />\n          <Grid xs={6}>\n            <Typography style={{ marginBottom: \"8px\" }} variant=\"body2\" component=\"p\">\n              Название\n            </Typography>\n          </Grid>\n          <Grid xs={2}>\n            <Typography style={{ marginBottom: \"8px\" }} align=\"right\" variant=\"body2\" component=\"p\">\n              Кол-во\n            </Typography>\n          </Grid>\n          <Grid xs={3}>\n            <Typography style={{ marginBottom: \"8px\" }} align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n              Цена\n            </Typography>\n          </Grid>\n\n          {products.map(item => (\n            <CartItem {...item} />\n          ))}\n\n          <Grid xs={12}>\n            <Typography style={{ marginTop: \"8px\" }} align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n              Итого {products.map(i => i.count * parseInt(i.product.cost)).reduce((a,b) => a + b, 0)} руб\n            </Typography>\n          </Grid>\n        </Grid>\n      </div>\n    </div>\n  )\n}","import { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport { Fab, IconButton, PaperProps } from '@material-ui/core';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\n\nimport { Product } from \"../../types/product\";\nimport { useCallback } from 'react';\n\nconst useStyles = makeStyles({\n  media: {\n    height: 540,\n  },\n});\n\nexport const ProductCard = ({ product, onBuy, ref, ...rest }: { product: Product, onBuy: (id: string) => void} & PaperProps) => {\n  const classes = useStyles();\n  \n  const handleBuy = useCallback(() => onBuy(product.id), [ onBuy ]);\n\n  return (\n    <div {...rest} style={{ ...rest.style, margin: \"2rem\" }}>\n      <Card>\n        <CardActionArea>\n          <CardMedia\n            className={classes.media}\n            image={product.img}\n            title={product.name}\n          />\n          <CardContent style={{ margin: \"2rem\" }}>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n              <Typography gutterBottom variant=\"h2\" component=\"h1\">\n                {product.name}\n              </Typography>\n              <Fab color=\"primary\" aria-label=\"add to shopping cart\" onClick={handleBuy}>\n                <AddShoppingCartIcon />\n              </Fab>\n            </div>\n            <Typography variant=\"h6\" component=\"p\">\n              {product.description}\n            </Typography>\n            <div style={{ display: \"flex\", marginTop: \"16px\", justifyContent: \"space-between\" }}>\n              <Typography variant=\"h4\" color=\"error\" component=\"p\">\n                {product.cost}\n              </Typography>\n              <Typography variant=\"h4\" color=\"textSecondary\" component=\"p\">\n                {product.weight}\n              </Typography>\n            </div>\n          </CardContent>\n        </CardActionArea>\n      </Card>\n    </div>\n  );\n}","import { useContext, useMemo } from 'react';\nimport { Dialog, makeStyles, PaperProps } from '@material-ui/core';\n\nimport { ShopContext } from '../contexts/shop.context';\nimport { CartContext } from '../contexts/cart.context';\n\nimport { ProductList } from './product/list';\nimport { CartList } from './cart/list';\nimport { ProductCard } from './product/card';\n\nconst useDialogStyles = makeStyles({\n  dialog: {\n    position: 'absolute',\n    paddingRight: '430px',\n    boxSizing: 'border-box'\n  }\n});\n\nexport const Shop = () => {\n  const shop = useContext(ShopContext);\n  const cart = useContext(CartContext);\n\n  const classes = useDialogStyles();\n\n  const current = useMemo(() => shop?.products.find(i => i.id === shop?.currentId), [ shop?.products, shop?.currentId ]);\n\n  const Paper = useMemo(() => {\n    return current ? (props: PaperProps) => <ProductCard {...props} onBuy={id => shop?.add(id)} product={current} /> : () => <></>\n  }, [ current?.id, shop?.add ]);\n\n  if (!shop || !cart) {\n    return null;\n  }\n\n  const dialog = useMemo(() => (\n    <Dialog\n      fullWidth={true}\n\n      classes={{\n        paper: cart.products.length ? classes.dialog : undefined\n      }}\n      \n      maxWidth=\"xl\"\n      open={!!current}\n      onClose={shop.close}\n      PaperComponent={props => Paper(props)}\n      aria-labelledby=\"max-width-dialog-title\"\n    />\n  ), [ current?.id, cart.products.length ]);\n  \n  return (\n    <>\n      <div style={{ display: \"flex\", height: \"100vh\", padding: \"2rem 0 2rem 2rem\", boxSizing: \"border-box\", backgroundColor: \"#eee\" }}>\n        <ProductList onCommand={shop.resetDemoTimer} style={{ transition: \"all 200ms ease-out\", filter: current ? \"blur(10px)\" : \"none\" }} products={shop.products} />\n        \n        <CartList products={cart.products.map(i => ({ product: shop.products.filter(j => j.id === i.id)[0], count: i.count }))} />\n      </div>\n        \n      {dialog}\n    </>\n  )\n}\n","import products from './products.json';\n\nimport { Shop } from './components/shop';\n\nimport { CartProvider } from './contexts/cart.context';\nimport { ShopProvider } from './contexts/shop.context';\nimport { SpeechProvider } from './contexts/speech.context';\n\nimport { useDB } from './hooks/useDB';\n\nimport { Product } from './types/product';\n\nfunction App() {\n  const db = useDB<Product>(products, async () => fetch('/products.json').then(resp => resp.json()));\n\n  return (\n    <SpeechProvider>\n      <CartProvider>\n        <ShopProvider products={db}>\n          <Shop />\n        </ShopProvider>\n      </CartProvider>\n    </SpeechProvider>\n  );\n}\n\nexport default App;\n","import { useEffect, useState } from \"react\";\n\n\nexport const useDB = <T>(data: T[], source: () => Promise<T[]>) => {\n  const [ db, setDb ] = useState<T[]>(data);\n\n  useEffect(() => {\n    setInterval(async () => {\n      try {\n        const products = await source();\n        \n        setDb(products);\n      } catch (e) {\n        console.log('no data');\n      }\n    }, 10000);\n  }, []);\n\n  return db;\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}