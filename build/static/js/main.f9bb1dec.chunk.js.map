{"version":3,"sources":["contexts/speech.context.tsx","hooks/useSpeech.ts","hooks/useCommand.ts","contexts/cart.context.tsx","contexts/shop.context.tsx","components/old/product-card.tsx","components/product/item.tsx","components/product/list.tsx","components/cart/item.tsx","components/cart/list.tsx","components/product/card.tsx","components/shop.tsx","App.tsx","hooks/useDB.ts","index.tsx"],"names":["SpeechContext","createContext","undefined","SpeechProvider","children","useState","result","setResult","useEffect","voice","webkitSpeechRecognition","lang","continious","interimResults","onerror","err","onresult","e","results","Object","keys","filter","i","parseInt","toString","map","transcript","final","isFinal","onend","setTimeout","start","Provider","value","useSpeech","useContext","useCommand","command","fn","speech","phraze","find","toLowerCase","indexOf","console","log","CartContext","CartProvider","products","setProducts","add","useCallback","id","count","items","del","item","clear","context","ShopContext","ShopProvider","currentId","setCurrentId","setCount","cart","target","names","j","k","current","ProductCard","product","showText","className","style","backgroundImage","img","name","cost","description","weight","useStyles","makeStyles","media","height","ProductItem","classes","margin","Card","CardActionArea","CardMedia","image","title","CardContent","display","justifyContent","Typography","gutterBottom","variant","component","color","ProductList","container","useRef","scrollTop","clientHeight","flexDirection","ref","overflow","scrollBehavior","Grid","spacing","xs","theme","createStyles","root","small","width","large","CartItem","Avatar","alt","src","align","CartList","length","minWidth","marginRight","opacity","transition","alignItems","reduce","a","b","Shop","oldShop","setOldShop","shop","paper","useMemo","padding","boxSizing","backgroundColor","Dialog","fullWidth","maxWidth","open","onClose","PaperComponent","aria-labelledby","App","db","data","setDb","setInterval","fetch","then","resp","json","useDB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f9bb1dec.chunk.js","sourcesContent":["import { createContext, PropsWithChildren, useEffect, useState } from \"react\";\n\nimport { Speech } from \"../types/speech\";\n\nexport const SpeechContext = createContext<Speech | undefined>(undefined);\n\nexport const SpeechProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [ result, setResult ] = useState<Speech>();\n\n  useEffect(() => {\n    // @ts-ignore\n    const voice = new webkitSpeechRecognition();\n\n    voice.lang = 'ru-RU';\n    voice.continious = true;\n    voice.interimResults = true;\n\n    voice.onerror = (err: any) => {\n      // console.log('error', err);\n    }\n\n    voice.onresult = (e: any) => {\n      const results = Object.keys(e.results[0]).filter(i => parseInt(i, 10).toString() === i).map(i => e.results[0][i].transcript);\n      \n      setResult({ results, final: e.results[0].isFinal });\n    }\n\n    voice.onend = () => {\n      // console.log('end');\n\n      setTimeout(() => voice.start(), 100);\n    }\n\n    voice.start();\n  }, []);\n\n  return (\n    <SpeechContext.Provider value={result}>\n      {children}\n    </SpeechContext.Provider>\n  );\n}","import { useContext } from \"react\";\n\nimport { SpeechContext } from '../contexts/speech.context';\n\nexport const useSpeech = () => {\n  const result = useContext(SpeechContext)\n\n  return result;\n}","import { useEffect } from \"react\";\n\nimport { useSpeech } from \"./useSpeech\";\n\nexport const useCommand = (command: string, fn: (command?: string) => void) => {\n  const speech = useSpeech();\n\n  useEffect(() => {\n    const phraze = speech?.results.find(i => i.toLowerCase().indexOf(command.toLowerCase()) !== -1);\n\n    if (speech?.final && phraze) {\n      console.log('COMMAND', command);\n      fn(phraze);\n    }\n  }, [ command, speech ]);\n}","import { createContext, PropsWithChildren, useCallback, useEffect, useState } from \"react\";\nimport { Cart, Position } from \"../types/cart\";\n\nexport const CartContext = createContext<Cart | undefined>(undefined);\n\nexport const CartProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [ products, setProducts ] = useState<Position[]>([]);\n\n  const add = useCallback((id: string, count?: number) => {\n    setProducts(items => {\n      return !items.find(i => i.id === id)\n        ? [ ...items, { id, count: count ?? 1 } ]\n        : items.map(i => i.id === id ? { id, count: i.count + (count ?? 1) } : i);\n    });\n  }, [ setProducts ]);\n\n  const del = useCallback((id: string, count?: number) => {\n    setProducts(items => {\n      const item = items.find(i => i.id === id);\n\n      if (!item) {\n        return items;\n      }\n\n      const result = item.count === 1 || item.count === count ? items.filter(i => i.id !== id) : items.map(i => i.id === id ? { id, count: i.count - (count ?? i.count) } : i);\n\n      return result.filter(i => i.count);\n    })\n  }, [ setProducts ]);\n\n  const clear = useCallback(() => {\n    setProducts([]);\n  }, [ setProducts ]);\n\n  console.log(products);\n\n  const context = {\n    products,\n    add,\n    del,\n    clear\n  }\n\n  return (\n    <CartContext.Provider value={context}>\n      {children}\n    </CartContext.Provider>\n  );\n}","import { createContext, PropsWithChildren, useCallback, useContext, useEffect, useState } from \"react\";\n\nimport { useCommand } from \"../hooks/useCommand\";\nimport { useDB } from \"../hooks/useDB\";\nimport { useSpeech } from \"../hooks/useSpeech\";\n\nimport { Cart, Position } from \"../types/cart\";\nimport { Product } from \"../types/product\";\nimport { Shop } from \"../types/shop\";\n\nimport { CartContext } from \"./cart.context\";\n\nexport const ShopContext = createContext<Shop | undefined>(undefined);\n\nexport const ShopProvider = ({ children, products }: PropsWithChildren<{ products: Product[] }>) => {\n  const [ currentId, setCurrentId ] = useState<string>();\n  const [ count, setCount ] = useState(1);\n\n  const speech = useSpeech();\n  const cart = useContext(CartContext);\n\n  useEffect(() => {\n    console.log(speech);\n    const target = products.find(i => i.names.find(j => speech?.results.find(k => k.indexOf(j) !== -1)));\n\n    if (target) {\n      setCurrentId(target.id);\n    }\n  }, [ speech, products ]);\n\n  useEffect(() => {\n    setCount(1);\n  }, [ currentId ]);\n\n  const clear = useCallback(() => {\n    setCurrentId(undefined);\n  }, [ setCurrentId ]);\n\n  useCommand('закрыть', clear);\n\n  useCommand('добавить', command => {\n    if (currentId) {\n      cart?.add(currentId, 1);\n    }\n  });\n\n  useCommand('удалить', command => {\n    if (currentId) {\n      cart?.del(currentId);\n    }\n  });\n\n  useCommand('очистить корзину', command => {\n    cart?.clear();\n  });\n\n  const context = {\n    products,\n    current: currentId ? products.find(i => i.id === currentId) : undefined,\n    count,\n    clear,\n  }\n\n  return (\n    <ShopContext.Provider value={context}>\n      {children}\n    </ShopContext.Provider>\n  );\n}","import { Product } from '../../types/product';\n\nexport const ProductCard = ({ product, showText }: { product: Product, showText: boolean }) => {\n  return  (\n    <div className=\"Block Column JustifySpace App\" style={{ backgroundImage: `url(${product.img})` }}>\n      {showText && (\n        <>\n          <div className=\"Block Column\">\n            <div className=\"Block JustifySpace\">\n              <div className=\"Block Name\">{product.name}</div>\n              <div className=\"Block Eighteen\">18+</div>\n            </div>\n            \n            <div className=\"Block JustifyEnd\">\n              <div className=\"Block Price\">{product.cost}</div>\n            </div>\n          </div>\n\n          <div className=\"Block JustifySpace AlignCenter\">\n            <div className=\"Block Desc\">{product.description}</div>\n            <div className=\"Block Weight\">{product.weight}</div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Product } from \"../../types/product\";\n\nconst useStyles = makeStyles({\n  media: {\n    height: 160,\n  },\n});\n\nexport const ProductItem = ({ product }: { product: Product }) => {\n  const classes = useStyles();\n\n  return (\n    <div style={{ margin: \"0 2rem 2rem 0\" }}>\n      <Card>\n        <CardActionArea>\n          <CardMedia\n            className={classes.media}\n            image={product.img}\n            title={product.name}\n          />\n          <CardContent>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n              <Typography gutterBottom variant=\"body2\" component=\"h2\">\n                {product.name}\n              </Typography>\n              <Typography variant=\"body2\" color=\"error\" component=\"p\">\n                {product.cost}\n              </Typography>\n            </div>\n          </CardContent>\n        </CardActionArea>\n      </Card>\n    </div>\n  );\n}","import { Grid, Typography } from \"@material-ui/core\";\nimport { useEffect, useRef } from \"react\";\nimport { useCommand } from \"../../hooks/useCommand\";\n\nimport { Product } from \"../../types/product\";\n\nimport { ProductItem } from \"./item\";\n\nexport const ProductList = ({ products }: { products: Product[] }) => {\n  const container = useRef<HTMLDivElement | null>(null);\n\n  useCommand('вниз', () => {\n    if (!container.current) {\n      return;\n    }\n\n    container.current.scrollTop = container.current.clientHeight + container.current.scrollTop;\n  });\n\n  useCommand('вверх', () => {\n    if (!container.current) {\n      return;\n    }\n    \n    container.current.scrollTop = container.current.scrollTop - container.current.clientHeight;\n  });\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <Typography gutterBottom variant=\"h2\" component=\"h2\">\n        Наше меню\n      </Typography>\n\n      <div ref={container} style={{ display: \"flex\", overflow: \"auto\", scrollBehavior: \"smooth\" }}>\n        <Grid container spacing={0} style={{ margin: \"none\" }}>\n          {products.map(product => (\n            <Grid xs={3}>\n              <ProductItem product={product} />\n            </Grid>\n          ))}\n        </Grid>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { Product } from '../../types/product';\nimport { Grid, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n    },\n    small: {\n      width: theme.spacing(3),\n      height: theme.spacing(3),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n  }),\n);\n\nexport const CartItem = ({ product, count }: { product: Product, count: number }) => {\n  const classes = useStyles();\n\n  return (\n    <>\n      <Grid xs={3}>\n        <Avatar alt=\"Remy Sharp\" src={product.img} className={classes.large} />\n      </Grid>\n      <Grid xs={5}>\n        <Typography gutterBottom variant=\"body2\" component=\"p\">\n          {product.name}\n        </Typography>\n      </Grid>\n      <Grid xs={2}>\n        <Typography gutterBottom variant=\"body2\" component=\"p\">\n          x{count}\n        </Typography>\n      </Grid>\n      <Grid xs={2}>\n        <Typography gutterBottom align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n          {product.cost}\n        </Typography>\n      </Grid>\n    </>\n  );\n}\n","import { Grid, Hidden, Typography } from \"@material-ui/core\";\n\nimport { Cart } from \"../../types/cart\";\nimport { Product } from \"../../types/product\";\n\nimport { CartItem } from \"./item\";\n\nexport const CartList = ({ products }: { products: { product: Product, count: number }[] }) => {\n  return (\n    <div style={{ width: !products.length ? 0 : \"320px\", minWidth: !products.length ? 0 : \"320px\", marginRight: !products.length ? \"0\" : \"2rem\", opacity: !products.length ? 0 : 1, transition: \"all 200ms ease-out\", display: \"flex\", flexDirection: \"column\" }}>\n      <Typography gutterBottom variant=\"h2\" component=\"h2\">\n        Корзина\n      </Typography>\n\n      <div style={{ display: \"flex\", overflow: \"auto\" }}>\n        <Grid alignItems=\"center\" container>\n          <Grid xs={3} />\n          <Grid xs={5}>\n            <Typography gutterBottom variant=\"body2\" component=\"p\">\n              Название\n            </Typography>\n          </Grid>\n          <Grid xs={2}>\n            <Typography gutterBottom variant=\"body2\" component=\"p\">\n              Кол-во\n            </Typography>\n          </Grid>\n          <Grid xs={2}>\n            <Typography gutterBottom align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n              Цена\n            </Typography>\n          </Grid>\n\n          {products.map(item => (\n            <CartItem {...item} />\n          ))}\n\n          <Grid xs={12}>\n            <Typography gutterBottom align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n              Итого {products.map(i => i.count * parseInt(i.product.cost)).reduce((a,b) => a + b, 0)} руб\n            </Typography>\n          </Grid>\n        </Grid>\n      </div>\n    </div>\n  )\n}","import { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Product } from \"../../types/product\";\n\nconst useStyles = makeStyles({\n  media: {\n    height: 540,\n  },\n});\n\nexport const ProductCard = ({ product }: { product: Product }) => {\n  const classes = useStyles();\n\n  return (\n    <div style={{ margin: \"2rem\" }}>\n      <Card>\n        <CardActionArea>\n          <CardMedia\n            className={classes.media}\n            image={product.img}\n            title={product.name}\n          />\n          <CardContent style={{ margin: \"2rem\" }}>\n            <Typography gutterBottom variant=\"h2\" component=\"h1\">\n              {product.name}\n            </Typography>\n            <Typography variant=\"h6\" component=\"p\">\n              {product.description}\n            </Typography>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n              <Typography variant=\"h4\" color=\"error\" component=\"p\">\n                {product.cost}\n              </Typography>\n              <Typography variant=\"h4\" color=\"textSecondary\" component=\"p\">\n                {product.cost}\n              </Typography>\n            </div>\n          </CardContent>\n        </CardActionArea>\n      </Card>\n    </div>\n  );\n}","import { useContext, useMemo, useState } from 'react';\nimport { Dialog, DialogContent, DialogTitle } from '@material-ui/core';\n\nimport { useCommand } from '../hooks/useCommand';\n\nimport { ShopContext } from '../contexts/shop.context';\nimport { CartContext } from '../contexts/cart.context';\n\nimport { ProductCard as OldProductCard } from './old/product-card';\nimport { ProductList } from './product/list';\nimport { CartList } from './cart/list';\nimport { ProductCard } from './product/card';\n\nexport const Shop = () => {\n  const [ oldShop, setOldShop ] = useState(true);\n\n  const shop = useContext(ShopContext);\n  const cart = useContext(CartContext);\n\n  useCommand('старый вариант', () => {\n    setOldShop(true);\n  });\n\n  useCommand('новый вариант', () => {\n    setOldShop(false);\n  });\n\n  const paper = useMemo(() => shop?.current ? <ProductCard product={shop.current} /> : <></>, [ shop?.current ]);\n\n  if (!shop || !cart) {\n    return null;\n  }\n\n  if (oldShop) {\n    return shop.current ? (\n      <OldProductCard product={shop.current} showText={oldShop} />\n    ) : null;\n  }\n  \n  return (\n    <>\n      <div style={{ display: \"flex\", height: \"100vh\", padding: \"2rem 0 2rem 2rem\", boxSizing: \"border-box\", backgroundColor: \"#eee\", transition: \"all 200ms ease-out\", filter: shop.current ? \"blur(20px)\" : \"none\" }}>\n        <ProductList products={shop.products} />\n        \n        <CartList products={cart.products.map(i => ({ product: shop.products.filter(j => j.id === i.id)[0], count: i.count }))} />\n      </div>\n        \n      <Dialog\n        fullWidth={true}\n        maxWidth=\"xl\"\n        open={!!shop.current}\n        onClose={shop.clear}\n        PaperComponent={() => paper}\n        aria-labelledby=\"max-width-dialog-title\"\n      />\n    </>\n  )\n}\n","import './App.css';\n\nimport products from './products.json';\n\nimport { Shop } from './components/shop';\n\nimport { CartProvider } from './contexts/cart.context';\nimport { ShopProvider } from './contexts/shop.context';\nimport { SpeechProvider } from './contexts/speech.context';\n\nimport { useDB } from './hooks/useDB';\n\nimport { Product } from './types/product';\n\nfunction App() {\n  const db = useDB<Product>(products);\n\n  return (\n    <SpeechProvider>\n      <CartProvider>\n        <ShopProvider products={db}>\n          <Shop />\n        </ShopProvider>\n      </CartProvider>\n    </SpeechProvider>\n  );\n}\n\nexport default App;\n","import { useEffect, useState } from \"react\";\n\n\nexport const useDB = <T>(data: T[]) => {\n  const [ db, setDb ] = useState<T[]>(data);\n\n  useEffect(() => {\n    setInterval(async () => {\n      try {\n        setDb(await fetch('/products.json').then(resp => resp.json()));\n      } catch (e) {\n        console.log('no data');\n      }\n    }, 10000);\n  }, []);\n\n  return db;\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}