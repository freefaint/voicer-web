{"version":3,"sources":["contexts/speech.context.tsx","hooks/useSpeech.ts","hooks/useCommand.ts","hooks/useTimeout.ts","contexts/cart.context.tsx","contexts/shop.context.tsx","components/product/item.tsx","components/product/list.tsx","components/cart/item.tsx","components/cart/list.tsx","components/count.tsx","components/product/card.tsx","components/cart/item-large.tsx","components/cart/cart.tsx","components/cart/result.tsx","components/shop.tsx","App.tsx","hooks/useDB.ts","index.tsx"],"names":["SpeechContext","createContext","undefined","SpeechProvider","children","useState","result","setResult","useEffect","voice","webkitSpeechRecognition","lang","continious","interimResults","onerror","err","onresult","e","results","Object","keys","filter","i","parseInt","toString","map","transcript","final","isFinal","onend","setTimeout","start","Provider","value","useSpeech","useContext","useCommand","command","fn","speech","phraze","find","toLowerCase","indexOf","console","log","reducer","state","action","seconds","type","number","running","CartContext","CartProvider","products","setProducts","add","useCallback","id","count","items","del","clear","context","ShopContext","ShopProvider","demoTimer","initSeconds","useReducer","dispatch","reset","resetSeconds","intervalId","setInterval","clearInterval","useTimeout","currentId","setCurrentId","cart","close","selectRandom","Math","ceil","random","length","remove","variants","name","k","ok","replace","trim","names","j","sort","a","b","first","max","second","target","resetDemoTimer","useStyles","makeStyles","media","height","ProductItem","product","onSelect","classes","handleClick","style","margin","Card","CardActionArea","onClick","CardMedia","className","image","img","title","CardContent","Typography","gutterBottom","variant","component","display","justifyContent","color","cost","weight","ProductList","onCommand","onSelectProduct","container","useRef","current","scrollTop","clientHeight","flexDirection","ref","overflow","scrollBehavior","Grid","spacing","xs","theme","createStyles","root","small","width","large","CartItem","Avatar","alt","src","align","useButtonStyles","extendedIcon","marginRight","CartList","onClear","onOrder","buttonClasses","minWidth","opacity","transition","alignItems","marginBottom","item","marginTop","reduce","Fab","ShoppingCart","ClearRounded","Count","lockOnOne","onChange","handlePlus","handleMinus","disabled","size","useImageStyles","ProductCard","onBuy","onRemove","onCount","onClose","onPointerMove","rest","countToAdd","setCountToAdd","imageClasses","handleBuy","handleRemove","countInCart","useMemo","setCount","padding","flexBasis","description","CartItemLarge","handleCount","Cart","position","top","right","DialogContent","Result","code","useDialogStyles","dialog","boxSizing","Shop","openedCart","setOpenedCart","openedReady","setOpenedReady","shop","Paper","props","handleOpenCart","handleCloseCart","handleCLoseReady","handleOrder","orderNumber","Date","valueOf","substr","data","total","fetch","method","body","JSON","stringify","Dialog","fullWidth","paper","maxWidth","open","PaperComponent","cartDialog","readyDialog","backgroundColor","App","db","source","setDb","useDB","then","resp","json","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2d728c0f.chunk.js","sourcesContent":["import { createContext, PropsWithChildren, useEffect, useState } from \"react\";\n\nimport { Speech } from \"../types/speech\";\n\nexport const SpeechContext = createContext<Speech | undefined>(undefined);\n\nexport const SpeechProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [ result, setResult ] = useState<Speech>();\n\n  useEffect(() => {\n    // @ts-ignore\n    const voice = new webkitSpeechRecognition();\n\n    voice.lang = 'ru-RU';\n    voice.continious = true;\n    voice.interimResults = true;\n\n    voice.onerror = (err: any) => {\n      // console.log('error', err);\n    }\n\n    voice.onresult = (e: any) => {\n      const results = Object.keys(e.results[0]).filter(i => parseInt(i, 10).toString() === i).map(i => e.results[0][i].transcript);\n      \n      setResult({ results, final: e.results[0].isFinal });\n    }\n\n    voice.onend = () => {\n      // console.log('end');\n\n      setTimeout(() => voice.start(), 100);\n    }\n\n    voice.start();\n  }, []);\n\n  return (\n    <SpeechContext.Provider value={result}>\n      {children}\n    </SpeechContext.Provider>\n  );\n}","import { useContext } from \"react\";\n\nimport { SpeechContext } from '../contexts/speech.context';\n\nexport const useSpeech = () => {\n  const result = useContext(SpeechContext)\n\n  return result;\n}","import { useEffect } from \"react\";\n\nimport { useSpeech } from \"./useSpeech\";\n\nexport const useCommand = (command: string, fn: (command?: string) => void) => {\n  const speech = useSpeech();\n\n  useEffect(() => {\n    const phraze = speech?.results.find(i => i.toLowerCase().indexOf(command.toLowerCase()) !== -1);\n\n    if (speech?.final && phraze) {\n      console.log('COMMAND', command);\n      fn(phraze);\n    }\n  }, [ command, speech ]);\n}","import { useCallback, useEffect, useReducer } from 'react';\n\nfunction reducer(state: { seconds: number; running: boolean }, action: { type: 'RESET' | 'MINUS'; number?: number }) {\n  const seconds = action.type === 'RESET' ? action.number || 0 : state.seconds - 1;\n  const running = seconds > 0;\n\n  return { seconds, running };\n}\n\nexport const useTimeout = (initSeconds?: number) => {\n  const [state, dispatch] = useReducer(reducer, { seconds: initSeconds ?? 0, running: !!initSeconds });\n\n  const reset = useCallback(\n    (resetSeconds?: number) => {\n      dispatch({ type: 'RESET', number: resetSeconds ?? initSeconds ?? 0 });\n    },\n    [initSeconds],\n  );\n\n  useEffect(() => {\n    let intervalId: NodeJS.Timeout | null = null;\n\n    if (state.running) {\n      intervalId = setInterval(() => {\n        dispatch({ type: 'MINUS' });\n      }, 1000);\n    } else if (intervalId) {\n      clearInterval(intervalId);\n    }\n\n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    };\n  }, [state.running]);\n\n  return { ...state, reset };\n};\n","import { createContext, PropsWithChildren, useCallback, useEffect, useState } from \"react\";\nimport { Cart, Position } from \"../types/cart\";\n\nexport const CartContext = createContext<Cart | undefined>(undefined);\n\nexport const CartProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [ products, setProducts ] = useState<Position[]>([]);\n\n  const add = useCallback((id: string, count?: number) => {\n    setProducts(items => {\n      return !items.find(i => i.id === id)\n        ? [ ...items, { id, count: count ?? 1 } ]\n        : items.map(i => i.id === id ? { id, count: i.count + (count ?? 1) } : i);\n    });\n  }, [ setProducts ]);\n\n  const count = useCallback((id: string, count: number) => {\n    setProducts(items => {\n      return items.map(i => i.id === id ? { id, count } : i);\n    });\n  }, [ setProducts ]);\n\n  const del = useCallback((id: string) => {\n    setProducts(items => {\n      return items.filter(i => i.id !== id);\n    })\n  }, [ setProducts ]);\n\n  const clear = useCallback(() => {\n    setProducts([]);\n  }, [ setProducts ]);\n\n  console.log(products);\n\n  const context = {\n    products,\n    add,\n    del,\n    count,\n    clear\n  }\n\n  return (\n    <CartContext.Provider value={context}>\n      {children}\n    </CartContext.Provider>\n  );\n}","import { createContext, PropsWithChildren, useCallback, useContext, useEffect, useState } from \"react\";\n\nimport { useCommand } from \"../hooks/useCommand\";\nimport { useSpeech } from \"../hooks/useSpeech\";\nimport { useTimeout } from \"../hooks/useTimeout\";\n\nimport { Product } from \"../types/product\";\nimport { Shop } from \"../types/shop\";\n\nimport { CartContext } from \"./cart.context\";\n\nexport const ShopContext = createContext<Shop | undefined>(undefined);\n\nexport const ShopProvider = ({ children, products }: PropsWithChildren<{ products: Product[] }>) => {\n  const demoTimer = useTimeout(180);\n\n  const [ currentId, setCurrentId ] = useState<string>();\n\n  const speech = useSpeech();\n  const cart = useContext(CartContext);\n\n  const close = useCallback(() => {\n    demoTimer.reset();\n    setCurrentId(undefined);\n  }, [ setCurrentId, demoTimer ]);\n\n  const selectRandom = useCallback(() => {\n    setCurrentId(products[Math.ceil(Math.random() * products.length) - 1].id);\n  }, [ setCurrentId, products ]);\n\n  const add = useCallback((id: string, count?: number) => {\n    demoTimer.reset();\n    cart?.add(id, count);\n    close();\n  }, [ cart, demoTimer, close ]);\n\n  const remove = useCallback((id: string) => {\n    demoTimer.reset();\n    cart?.del(id);\n  }, [ cart, demoTimer ]);\n\n  const count = useCallback((id: string, count: number) => {\n    demoTimer.reset();\n    cart?.count(id, count);\n  }, [cart, demoTimer]);\n\n  useEffect(() => {\n    if (!demoTimer.seconds) {\n      cart?.clear();\n      selectRandom();\n      demoTimer.reset();\n    }\n  }, [ demoTimer.seconds ]);\n\n  useEffect(() => {\n    const variants = products\n      .map(i => ({\n        ...i,\n        results: [\n          {\n            name: i.name, \n\n            results: speech?.results.map(k => ({\n              speech: k,\n              ok: k.toLowerCase().indexOf(i.name.replace(/[()\"«»]/, '').toLowerCase().trim()) !== -1 \n            }))\n          },\n\n          ...i.names.map(j => ({\n            name: j,\n            \n            results: speech?.results.map(k => ({\n              speech: k,\n              ok: k.toLowerCase().indexOf(j.toLowerCase().trim()) !== -1 }) )\n            }))\n        ]\n      }) )\n      .filter(i => i.results?.find(j => j.results?.find(k => k.ok)))\n      .sort((a, b) => {\n        const first = Math.max(...a.results.filter(i => i.results?.find(j => j.ok)).map(i => i.name.length));\n        const second = Math.max(...b.results.filter(i => i.results?.find(j => j.ok)).map(i => i.name.length));\n  \n        return first > second ? -1 : first < second ? 1 : 0;\n      });\n\n    console.log('VARIANTS', variants);\n\n    const target = variants[0];\n\n    if (target && currentId !== target.id) {\n      setCurrentId(target.id);\n    }\n  }, [ speech, products, currentId ]);\n\n  useCommand('закрыть', () => {\n    demoTimer.reset();\n    close()\n  });\n\n  useCommand('добавить', command => {\n    if (currentId) {\n      demoTimer.reset();\n      cart?.add(currentId, 1);\n    }\n  });\n\n  useCommand('удалить', command => {\n    if (currentId) {\n      demoTimer.reset();\n      cart?.del(currentId);\n    }\n  });\n\n  const clear = useCallback(() => {\n    demoTimer.reset();\n    cart?.clear();\n  }, [ demoTimer, cart ]);\n\n  useCommand('очистить корзину', command => {\n    demoTimer.reset();\n    cart?.clear();\n  });\n\n  const context = {\n    products,\n    currentId,\n    count,\n    close,\n    clear,\n    resetDemoTimer: demoTimer.reset,\n    add,\n    remove,\n    setCurrentId,\n  }\n\n  return (\n    <ShopContext.Provider value={context}>\n      {children}\n    </ShopContext.Provider>\n  );\n}","import { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Product } from \"../../types/product\";\nimport { useCallback } from 'react';\n\nconst useStyles = makeStyles({\n  media: {\n    height: 160,\n  },\n});\n\nexport const ProductItem = ({ product, onSelect }: { product: Product, onSelect: (id: string) => void }) => {\n  const classes = useStyles();\n\n  const handleClick = useCallback(() => onSelect(product.id), [ product.id ]);\n\n  return (\n    <div style={{ margin: \"0 2rem 2rem 0\" }}>\n      <Card>\n        <CardActionArea onClick={handleClick}>\n          <CardMedia\n            className={classes.media}\n            image={product.img}\n            title={product.name}\n          />\n          <CardContent>\n            <Typography gutterBottom variant=\"body2\" component=\"h2\">\n              {product.name}\n            </Typography>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n              <Typography variant=\"body2\" color=\"error\" component=\"p\">\n                {product.cost}\n              </Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                {product.weight}\n              </Typography>\n            </div>\n          </CardContent>\n        </CardActionArea>\n      </Card>\n    </div>\n  );\n}","import { Grid, Typography } from \"@material-ui/core\";\nimport { useEffect, useRef } from \"react\";\nimport { useCommand } from \"../../hooks/useCommand\";\n\nimport { Product } from \"../../types/product\";\n\nimport { ProductItem } from \"./item\";\n\ninterface Props extends React.HTMLProps<HTMLDivElement> {\n  products: Product[];\n  onCommand: () => void;\n  onSelectProduct: (id: string) => void;\n}\n\nexport const ProductList = ({ products, style, onCommand, onSelectProduct }: Props) => {\n  const container = useRef<HTMLDivElement | null>(null);\n\n  useCommand('вниз', () => {\n    if (!container.current) {\n      return;\n    }\n\n    onCommand();\n    container.current.scrollTop = container.current.clientHeight + container.current.scrollTop;\n  });\n\n  useCommand('вверх', () => {\n    if (!container.current) {\n      return;\n    }\n    \n    onCommand();\n    container.current.scrollTop = container.current.scrollTop - container.current.clientHeight;\n  });\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\", ...style }}>\n      <Typography gutterBottom variant=\"h2\" component=\"h2\">\n        Наше меню\n      </Typography>\n\n      <div ref={container} style={{ display: \"flex\", overflow: \"auto\", scrollBehavior: \"smooth\" }}>\n        <Grid container spacing={0} style={{ margin: \"none\" }}>\n          {products.map(product => (\n            <Grid key={product.id} xs={3}>\n              <ProductItem product={product} onSelect={onSelectProduct} />\n            </Grid>\n          ))}\n        </Grid>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { Product } from '../../types/product';\nimport { Grid, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n    },\n    small: {\n      width: theme.spacing(3),\n      height: theme.spacing(3),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n  }),\n);\n\nexport const CartItem = ({ product, count }: { product: Product, count: number }) => {\n  const classes = useStyles();\n\n  return (\n    <>\n      <Grid spacing={1} xs={1}>\n        <Avatar style={{ margin: \"8px 0 8px 0\"}} alt=\"Remy Sharp\" src={product.img} className={classes.small} />\n      </Grid>\n      <Grid xs={6}>\n        <Typography variant=\"body2\" component=\"p\">\n          {product.name}\n        </Typography>\n      </Grid>\n      <Grid xs={2}>\n        <Typography align=\"right\" variant=\"body2\" component=\"p\">\n          x{count}\n        </Typography>\n      </Grid>\n      <Grid xs={3}>\n        <Typography align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n          {product.cost}\n        </Typography>\n      </Grid>\n    </>\n  );\n}\n","import { createStyles, Fab, Grid, Hidden, makeStyles, Theme, Typography } from \"@material-ui/core\";\nimport { ClearRounded, ShoppingCart } from \"@material-ui/icons\";\n\nimport { Product } from \"../../types/product\";\n\nimport { CartItem } from \"./item\";\n\n\nconst useButtonStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    extendedIcon: {\n      marginRight: theme.spacing(1),\n    },\n  }),\n);\n\ninterface Props extends React.HTMLProps<HTMLDivElement> {\n  cart: { product: Product, count: number }[];\n  onOrder: () => void;\n  onClear: () => void;\n}\n\nexport const CartList = ({ cart, style, onClear, onOrder }: Props) => {\n  const buttonClasses = useButtonStyles();\n\n  return (\n    <div style={{ ...style, width: !cart.length ? 0 : \"400px\", minWidth: !cart.length ? 0 : \"400px\", marginRight: !cart.length ? \"0\" : \"2rem\", opacity: !cart.length ? 0 : 1, transition: \"all 200ms ease-out\", display: \"flex\", flexDirection: \"column\" }}>\n      <Typography gutterBottom variant=\"h2\" component=\"h2\">\n        Корзина\n      </Typography>\n\n      <div style={{ display: \"flex\", overflow: \"auto\" }}>\n        <Grid alignItems=\"center\" container>\n          <Grid xs={1} />\n          <Grid xs={6}>\n            <Typography style={{ marginBottom: \"8px\" }} variant=\"body2\" component=\"p\">\n              Название\n            </Typography>\n          </Grid>\n          <Grid xs={2}>\n            <Typography style={{ marginBottom: \"8px\" }} align=\"right\" variant=\"body2\" component=\"p\">\n              Кол-во\n            </Typography>\n          </Grid>\n          <Grid xs={3}>\n            <Typography style={{ marginBottom: \"8px\" }} align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n              Цена\n            </Typography>\n          </Grid>\n\n          {cart.map(item => (\n            <CartItem key={item.product.id} {...item} />\n          ))}\n\n          <Grid xs={12}>\n            <Typography style={{ marginTop: \"8px\" }} align=\"right\" color=\"error\" variant=\"body2\" component=\"p\">\n              Итого {cart.map(i => i.count * parseInt(i.product.cost)).reduce((a,b) => a + b, 0)} руб\n            </Typography>\n          </Grid>\n        </Grid>\n      </div>\n        \n      <div style={{ display: \"flex\", justifyContent: \"space-between\", marginTop: \"2rem\" }}>\n        <Fab color=\"secondary\" variant=\"extended\" onClick={onOrder}>\n          <ShoppingCart className={buttonClasses.extendedIcon} />\n          Заказать\n        </Fab>\n\n        <Fab color=\"primary\" variant=\"extended\" onClick={onClear}>\n          <ClearRounded className={buttonClasses.extendedIcon} />\n          Очистить\n        </Fab>\n      </div>\n    </div>\n  )\n}","import Typography from '@material-ui/core/Typography';\nimport { Fab } from '@material-ui/core';\nimport MinusIcon from '@material-ui/icons/Remove';\nimport PlusIcon from '@material-ui/icons/Add';\n\nimport { useCallback } from 'react';\n\ninterface CountProps {\n  count: number;\n  lockOnOne?: boolean;\n  onChange: (count: number) => void;\n}\n\nexport const Count = ({ count, lockOnOne, onChange }: CountProps) => {\n  const handlePlus = useCallback(() => {\n    onChange(count + 1);\n  }, [ count, onChange ]);\n\n  const handleMinus = useCallback(() => {\n    onChange(count - 1);\n  }, [ count, onChange ]);\n\n  return (\n    <div style={{ display: \"flex\", alignItems: \"center\", margin: \"1rem 0\" }}>\n      <Fab color=\"primary\" disabled={(count === 1) && lockOnOne} size=\"small\" onClick={handleMinus}>\n        <MinusIcon />\n      </Fab>\n\n      <Typography variant=\"h6\" component=\"p\" style={{ margin: \"0 1rem\" }}>\n        {count} шт\n      </Typography>\n\n      <Fab color=\"primary\" size=\"small\" onClick={handlePlus}>\n        <PlusIcon />\n      </Fab>\n    </div>\n  );\n}","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport { Fab, PaperProps } from '@material-ui/core';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport CloseIcon from '@material-ui/icons/CloseRounded';\nimport RemoveIcon from '@material-ui/icons/Delete';\n\nimport { Product } from \"../../types/product\";\nimport { useCallback, useMemo, useState } from 'react';\nimport { Count } from '../count';\n\nconst useImageStyles = makeStyles({\n  media: {\n    height: 540,\n  },\n});\n\nconst useButtonStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    extendedIcon: {\n      marginRight: theme.spacing(1),\n    },\n  }),\n);\n\n\ninterface Props {\n  product: Product;\n  cart?: { id: string, count: number }[];\n  onBuy: (id: string, count: number) => void;\n  onRemove: (id: string) => void;\n  onCount: (id: string, count: number) => void;\n  onClose?: () => void;\n}\n\nexport const ProductCard = ({ product, onBuy, onRemove, onCount, onClose, onPointerMove, cart, ref, ...rest }: Props & PaperProps) => {\n  const [ countToAdd, setCountToAdd ] = useState(1);\n\n  const imageClasses = useImageStyles();\n  const buttonClasses = useButtonStyles();\n  \n  const handleBuy = useCallback(() => onBuy(product.id, countToAdd), [ onBuy, countToAdd ]);\n  const handleRemove = useCallback(() => onRemove(product.id), [ onRemove ]);\n\n  const countInCart = useMemo(() => cart?.find(i => i.id === product.id)?.count, [cart]);\n\n  const setCount = useCallback((i: number) => {\n    if (countInCart) {\n      if (!i) {\n        return onRemove(product.id);\n      }\n\n      onCount(product.id, i);\n    } else {\n      setCountToAdd(i);\n    }\n  }, [ countToAdd, countInCart, onRemove, onCount, setCountToAdd ]);\n\n  return (\n    <div {...rest} style={{ ...rest.style, margin: \"2rem\" }}>\n      <Card>\n        <CardMedia\n          className={imageClasses.media}\n          image={product.img}\n          title={product.name}\n          style={{\n            padding: \"20px\",\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n          }}\n        >\n          <Fab color=\"secondary\" onClick={onClose}>\n            <CloseIcon />\n          </Fab>\n        </CardMedia>\n        \n        <CardContent style={{ margin: \"2rem\" }}>\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n            <div style={{ display: \"flex\", flexDirection: \"column\", flexBasis: \"80%\" }}>\n              <Typography gutterBottom variant=\"h2\" component=\"h1\">\n                {product.name}\n              </Typography>\n              <Typography variant=\"h6\" component=\"p\">\n                {product.description}\n              </Typography>\n              <div style={{ marginTop: \"16px\" }}>\n                <Typography variant=\"h4\" color=\"error\" component=\"span\">\n                  {product.cost}\n                </Typography>\n                <Typography variant=\"h4\" color=\"textSecondary\" component=\"span\">\n                  &nbsp;({product.weight})\n                </Typography>\n              </div>\n            </div>\n\n            <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"flex-end\", alignItems: \"flex-end\", flexBasis: \"20%\" }}>\n              <Typography variant=\"h6\" component=\"p\">\n                {countInCart ? \"У вас в корзине\" : \"Укажите количество\"}\n              </Typography>\n\n              <Count count={countInCart || countToAdd} lockOnOne={!countInCart} onChange={setCount} />\n\n              {!!countInCart && (\n                <Fab color=\"secondary\" variant=\"extended\" onClick={handleRemove}>\n                  <RemoveIcon className={buttonClasses.extendedIcon} />\n                  Удалить\n                </Fab>\n              )}\n\n              {!countInCart && (\n                <Fab color=\"primary\" variant=\"extended\" onClick={handleBuy}>\n                  <AddShoppingCartIcon className={buttonClasses.extendedIcon} />\n                  Добавить\n                </Fab>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","import React, { useCallback } from 'react';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { Product } from '../../types/product';\nimport { Grid, Typography } from '@material-ui/core';\nimport { Count } from '../count';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n    },\n    small: {\n      width: theme.spacing(3),\n      height: theme.spacing(3),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n  }),\n);\n\ninterface Props {\n  product: Product;\n  count: number;\n  onRemove: (id: string) => void;\n  onCount: (id: string, count: number) => void;\n};\n\nexport const CartItemLarge = ({ product, onCount, onRemove, count }: Props) => {\n  const classes = useStyles();\n\n  const handleCount = useCallback((count: number) => {\n    if (!count) {\n      return onRemove(product.id);\n    }\n    onCount(product.id, count);\n  }, [ product ]);\n\n  return (\n    <>\n      <Grid spacing={1} xs={1}>\n        <Avatar style={{ margin: \"8px 0 8px 0\"}} alt=\"Remy Sharp\" src={product.img} className={classes.large} />\n      </Grid>\n      <Grid xs={6}>\n        <Typography variant=\"h5\" component=\"p\">\n          {product.name}\n        </Typography>\n      </Grid>\n      <Grid xs={2}>\n        <Typography align=\"right\" variant=\"h5\" component=\"p\">\n          <Count count={count} onChange={handleCount} />\n        </Typography>\n      </Grid>\n      <Grid xs={3}>\n        <Typography align=\"right\" color=\"error\" variant=\"h5\" component=\"p\">\n          {product.cost}\n        </Typography>\n      </Grid>\n    </>\n  );\n}\n","import { createStyles, DialogContent, Fab, Grid, Hidden, makeStyles, Paper, Theme, Typography } from \"@material-ui/core\";\nimport { ClearRounded, ShoppingCart } from \"@material-ui/icons\";\nimport CloseIcon from '@material-ui/icons/CloseRounded';\n\nimport { Product } from \"../../types/product\";\n\nimport { CartItemLarge } from \"./item-large\";\n\n\nconst useButtonStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    extendedIcon: {\n      marginRight: theme.spacing(1),\n    },\n  }),\n);\n\ninterface Props {\n  cart: { product: Product, count: number }[];\n  products: Product[];\n\n  onRemove: (id: string) => void;\n  onCount: (id: string, count: number) => void;\n  onOrder: () => void;\n  onClear: () => void;\n  onClose: () => void;\n}\n\nexport const Cart = ({ cart, onClear, onCount, onRemove, onClose, onOrder }: Props) => {\n  const buttonClasses = useButtonStyles();\n\n  return (\n    <Paper>\n      <Fab color=\"secondary\" onClick={onClose} style={{ position: \"absolute\", top: \"1rem\", right: \"1rem\"}}>\n        <CloseIcon />\n      </Fab>\n\n      <DialogContent>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <Typography gutterBottom variant=\"h2\" component=\"h2\">\n            Корзина\n          </Typography>\n\n          <div style={{ display: \"flex\", overflow: \"auto\" }}>\n            <Grid alignItems=\"center\" container>\n              <Grid xs={1} />\n              <Grid xs={6}>\n                <Typography style={{ marginBottom: \"8px\" }} variant=\"h5\" component=\"p\">\n                  Название\n                </Typography>\n              </Grid>\n              <Grid xs={2}>\n                <Typography style={{ marginBottom: \"8px\" }} align=\"right\" variant=\"h5\" component=\"p\">\n                  Кол-во\n                </Typography>\n              </Grid>\n              <Grid xs={3}>\n                <Typography style={{ marginBottom: \"8px\" }} align=\"right\" color=\"error\" variant=\"h5\" component=\"p\">\n                  Цена\n                </Typography>\n              </Grid>\n\n              {cart.map(item => (\n                <CartItemLarge\n                  key={item.product.id}\n                  {...item}\n                  onCount={onCount}\n                  onRemove={onRemove}\n                />\n              ))}\n\n              <Grid xs={12}>\n                <Typography style={{ marginTop: \"8px\" }} align=\"right\" color=\"error\" variant=\"h5\" component=\"p\">\n                  Итого {cart.map(i => i.count * parseInt(i.product.cost)).reduce((a,b) => a + b, 0)} руб\n                </Typography>\n              </Grid>\n            </Grid>\n          </div>\n            \n          <div style={{ display: \"flex\", justifyContent: \"space-between\", marginTop: \"2rem\" }}>\n            <Fab color=\"secondary\" variant=\"extended\" onClick={onOrder}>\n              <ShoppingCart className={buttonClasses.extendedIcon} />\n              Оформить заказ\n            </Fab>\n\n            <Fab color=\"primary\" variant=\"extended\" onClick={onClose} style={{ margin: \"0 1rem\" }}>\n              <ClearRounded className={buttonClasses.extendedIcon} />\n              Назад к покупкам\n            </Fab>\n\n            <Fab color=\"primary\" variant=\"extended\" onClick={onClear}>\n              <ClearRounded className={buttonClasses.extendedIcon} />\n              Очистить корзину\n            </Fab>\n          </div>\n        </div>\n      </DialogContent>\n    </Paper>\n  )\n}","import { createStyles, DialogContent, Fab, Grid, Hidden, makeStyles, Paper, Theme, Typography } from \"@material-ui/core\";\nimport { ClearRounded, ShoppingCart } from \"@material-ui/icons\";\nimport CloseIcon from '@material-ui/icons/CloseRounded';\n\nimport { Product } from \"../../types/product\";\n\nimport { CartItemLarge } from \"./item-large\";\n\n\nconst useButtonStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    extendedIcon: {\n      marginRight: theme.spacing(1),\n    },\n  }),\n);\n\ninterface Props {\n  code: string;\n  onClose: () => void;\n}\n\nexport const Result = ({ code, onClose }: Props) => {\n  const buttonClasses = useButtonStyles();\n\n  return (\n    <Paper>\n      <Fab color=\"secondary\" onClick={onClose} style={{ position: \"absolute\", top: \"1rem\", right: \"1rem\"}}>\n        <CloseIcon />\n      </Fab>\n\n      <DialogContent>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", margin: \"8rem 0\" }}>\n          <Typography gutterBottom variant=\"h1\" component=\"h2\">\n            Спасибо! Код заказа {code}\n          </Typography>\n        </div>\n      </DialogContent>\n    </Paper>\n  )\n}","import { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { Dialog, makeStyles, PaperProps } from '@material-ui/core';\n\nimport { ShopContext } from '../contexts/shop.context';\nimport { CartContext } from '../contexts/cart.context';\n\nimport { ProductList } from './product/list';\nimport { CartList } from './cart/list';\nimport { ProductCard } from './product/card';\nimport { Cart } from './cart/cart';\nimport { Result } from './cart/result';\n\nconst useDialogStyles = makeStyles({\n  dialog: {\n    position: 'absolute',\n    right: '450px',\n    width: 'calc(100vw - 520px)',\n    boxSizing: 'border-box'\n  }\n});\n\nexport const Shop = () => {\n  const [ openedCart, setOpenedCart ] = useState(false);\n  const [ openedReady, setOpenedReady ] = useState<string>();\n\n  const shop = useContext(ShopContext);\n  const cart = useContext(CartContext);\n\n  const classes = useDialogStyles();\n\n  const current = useMemo(() => shop?.products.find(i => i.id === shop?.currentId), [ shop?.products, shop?.currentId ]);\n\n  const Paper = useMemo(() => {\n    return current && shop ? (props: PaperProps) => (\n      <ProductCard\n        {...props}\n        cart={cart?.products}\n        onCount={shop?.count}\n        onBuy={(id, count) => shop?.add(id, count)}\n        onRemove={id => shop?.remove(id)}\n        onClose={shop?.close}\n        product={current}\n      />\n    ) : () => <></>\n  }, [ current?.id, current, cart, shop?.add ]);\n\n  if (!shop || !cart) {\n    return null;\n  }\n\n  const handleOpenCart = useCallback(() => {\n    setOpenedCart(true);\n  }, [ setOpenedCart ]);\n\n  const handleCloseCart = useCallback(() => {\n    setOpenedCart(false);\n  }, [ setOpenedCart ]);\n\n  const handleCLoseReady = useCallback(() => {\n    setOpenedReady(undefined);\n  }, [setOpenedReady]);\n\n  const handleOrder = useCallback(() => {\n    const orderNumber = new Date().valueOf().toString().substr(6, 4);\n\n    const data = cart.products.map(i => ({ product: shop.products.filter(j => j.id === i.id)[0], count: i.count }));\n    const total = data.map(i => i.count * parseInt(i.product.cost)).reduce((a,b) => a + b, 0);\n\n    fetch('/mail.php', { method: 'post', body: JSON.stringify({ data, total }) });\n\n    shop.clear();\n\n    setOpenedReady(orderNumber);\n  }, [ shop, cart ]);\n\n  useEffect(() => {\n    if (!cart.products.length) {\n      setOpenedCart(false);\n    }\n  }, [cart, cart.products])\n\n  const dialog = useMemo(() => (\n    <Dialog\n      fullWidth={true}\n\n      classes={{\n        paper: cart.products.length ? classes.dialog : undefined\n      }}\n      \n      maxWidth=\"xl\"\n      open={!!current}\n      onClose={shop.close}\n      PaperComponent={props => Paper(props)}\n    />\n  ), [ current?.id, cart, cart.products, shop, cart.products.length ]);\n\n  const cartDialog = useMemo(() => (\n    <Dialog\n      fullWidth={true}\n      maxWidth=\"xl\"\n      open={!!openedCart}\n      onClose={handleCloseCart}\n    >\n      <Cart\n        cart={cart.products.map(i => ({ product: shop.products.filter(j => j.id === i.id)[0], count: i.count }))}\n        products={shop.products}\n\n        onRemove={shop.remove}\n        onCount={shop.count}\n        onOrder={handleOrder}\n        onClear={shop.clear}\n        onClose={handleCloseCart}\n      />\n    </Dialog>\n  ), [ openedCart, shop, cart, cart.products, shop.products, handleCloseCart ]);\n\n  const readyDialog = useMemo(() => (\n    <Dialog\n      fullWidth={true}\n      maxWidth=\"xl\"\n      open={!!openedReady}\n      onClose={handleCLoseReady}\n    >\n      <Result\n        code={openedReady + ''}\n        onClose={handleCLoseReady}\n      />\n    </Dialog>\n  ), [ openedReady, shop, cart, cart.products, shop.products, handleCloseCart ]);\n  \n  return (\n    <>\n      <div style={{ display: \"flex\", height: \"100vh\", padding: \"2rem 0 2rem 2rem\", boxSizing: \"border-box\", backgroundColor: \"#eee\" }}>\n        <ProductList\n          onCommand={shop.resetDemoTimer}\n          onSelectProduct={shop.setCurrentId}\n          style={{ transition: \"all 200ms ease-out\", filter: current || openedCart ? \"blur(10px)\" : \"none\" }}\n          products={shop.products}\n        />\n        \n        <CartList\n          onClear={shop.clear}\n          onOrder={handleOpenCart}\n          style={{ transition: \"all 200ms ease-out\", filter: openedCart ? \"blur(10px)\" : \"none\" }}\n          cart={cart.products.map(i => ({ product: shop.products.filter(j => j.id === i.id)[0], count: i.count }))}\n        />\n      </div>\n        \n      {dialog}\n      {cartDialog}\n      {readyDialog}\n    </>\n  )\n}\n","import products from './products.json';\n\nimport { Shop } from './components/shop';\n\nimport { CartProvider } from './contexts/cart.context';\nimport { ShopProvider } from './contexts/shop.context';\nimport { SpeechProvider } from './contexts/speech.context';\n\nimport { useDB } from './hooks/useDB';\n\nimport { Product } from './types/product';\n\nfunction App() {\n  const db = useDB<Product>(products, async () => fetch('/products.json').then(resp => resp.json()));\n\n  return (\n    <SpeechProvider>\n      <CartProvider>\n        <ShopProvider products={db}>\n          <Shop />\n        </ShopProvider>\n      </CartProvider>\n    </SpeechProvider>\n  );\n}\n\nexport default App;\n","import { useEffect, useState } from \"react\";\n\n\nexport const useDB = <T>(data: T[], source: () => Promise<T[]>) => {\n  const [ db, setDb ] = useState<T[]>(data);\n\n  useEffect(() => {\n    setInterval(async () => {\n      try {\n        const products = await source();\n        \n        setDb(products);\n      } catch (e) {\n        console.log('no data');\n      }\n    }, 10000);\n  }, []);\n\n  return db;\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}